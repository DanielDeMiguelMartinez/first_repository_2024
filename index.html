<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Shooting Click Game</title>
<style>
	:root{--bg:#0f172a;--panel:#071029;--accent:#ef4444;--accent2:#60a5fa}
	html,body{height:100%;margin:0;background:linear-gradient(180deg,#021026 0%, #071428 100%);font-family:Inter,Segoe UI,Arial;color:#fff}
	.wrap{max-width:1100px;margin:20px auto;padding:12px}
	header{display:flex;align-items:center;justify-content:space-between}
	header h1{font-size:20px;margin:0}
	.controls{display:flex;gap:10px;align-items:center}
	button{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
	button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.08)}
	.hud{display:flex;gap:12px;align-items:center}
	.canvas-wrap{position:relative;margin-top:14px;border-radius:12px;overflow:hidden;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
	canvas{display:block;background:linear-gradient(180deg,#08202b 0%, #04111a 100%)}
	.overlay{position:absolute;left:12px;top:12px;z-index:20}
	.score{background:rgba(0,0,0,0.25);backdrop-filter:blur(4px);padding:8px 12px;border-radius:10px}
	.center-ui{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:21;text-align:center}
	.title{font-size:22px;margin-bottom:8px}
	.subtitle{color:#cbd5e1;margin-bottom:14px}
	.crosshair{position:absolute;left:0;top:0;pointer-events:none;z-index:30}
	footer{margin-top:12px;color:#9ca3af;font-size:13px}
</style>
</head>
<body>
<div class="wrap">
	<header>
		<h1>Juego: Dispara a los objetos</h1>
		<div class="controls hud">
			<div class="score" id="scoreBox">Puntuación: 0</div>
			<div class="score" id="livesBox">Vidas: 3</div>
			<div class="score" id="levelBox">Nivel: 1</div>
			<button id="startBtn">Comenzar</button>
			<button id="pauseBtn" class="secondary">Pausa</button>
		</div>
	</header>

	<div class="canvas-wrap">
		<canvas id="gameCanvas" width="1000" height="600"></canvas>
		<div class="overlay">
			<!-- optional overlay content -->
		</div>
		<div class="center-ui" id="centerUI">
			<div class="title">Pulsa <strong>Comenzar</strong> para jugar</div>
			<div class="subtitle">Haz clic con el ratón para disparar a los objetivos en movimiento</div>
		</div>
		<svg class="crosshair" id="crosshair" width="40" height="40" viewBox="0 0 40 40">
			<circle cx="20" cy="20" r="10" stroke="#ffffff" stroke-width="2" fill="rgba(255,255,255,0.04)"></circle>
			<line x1="0" y1="20" x2="40" y2="20" stroke="#ffffff" stroke-width="1" opacity="0.4"></line>
			<line x1="20" y1="0" x2="20" y2="40" stroke="#ffffff" stroke-width="1" opacity="0.4"></line>
		</svg>
	</div>

	<footer>Haz click sobre los objetos para eliminarlos. Sobrevive todo lo que puedas.</footer>
</div>

<script>
(function() {
	const canvas = document.getElementById('gameCanvas');
	const ctx = canvas.getContext('2d');
	const cross = document.getElementById('crosshair');
	const startBtn = document.getElementById('startBtn');
	const pauseBtn = document.getElementById('pauseBtn');
	const centerUI = document.getElementById('centerUI');
	const scoreBox = document.getElementById('scoreBox');
	const livesBox = document.getElementById('livesBox');
	const levelBox = document.getElementById('levelBox');

	let w = canvas.width = Math.min(window.innerWidth-60, 1000);
	let h = canvas.height = Math.min(window.innerHeight-200, 700);

	window.addEventListener('resize', ()=>{
		w = canvas.width = Math.min(window.innerWidth-60, 1000);
		h = canvas.height = Math.min(window.innerHeight-200, 700);
	});

	// game state
	let running = false;
	let paused = false;
	let score = 0;
	let lives = 3;
	let level = 1;
	let spawnTimer = 0;
	let spawnInterval = 1200; // ms
	let lastTime = 0;
	let targets = [];
	let particles = [];

	function rand(min,max){return Math.random()*(max-min)+min}

	function spawnTarget(){
		// choose side: 0 left->right, 1 right->left, 2 top->down, 3 bottom->up
		const side = Math.floor(rand(0,4));
		let x,y,vx,vy,size,color;
		size = Math.floor(rand(18, 42));
		color = `hsl(${Math.floor(rand(0,360))} 80% 60%)`;
		const speed = rand(40, 140) + level*8;
		if(side===0){ x=-size; y=rand(30,h-30); vx = speed; vy=rand(-30,30); }
		else if(side===1){ x=w+size; y=rand(30,h-30); vx = -speed; vy=rand(-30,30); }
		else if(side===2){ y=-size; x=rand(30,w-30); vy = speed; vx=rand(-30,30); }
		else { y=h+size; x=rand(30,w-30); vy = -speed; vx=rand(-30,30); }
		targets.push({x,y,vx,vy,size,color,hit:false,spawnAt:Date.now()});
	}

	function drawTarget(t){
		ctx.save();
		ctx.beginPath();
		ctx.fillStyle = t.color;
		ctx.shadowColor = t.color;
		ctx.shadowBlur = 12;
		ctx.arc(t.x, t.y, t.size, 0, Math.PI*2);
		ctx.fill();
		ctx.restore();

		// inner mark
		ctx.beginPath();
		ctx.fillStyle = 'rgba(255,255,255,0.15)';
		ctx.arc(t.x- t.size*0.25, t.y - t.size*0.25, t.size*0.35, 0, Math.PI*2);
		ctx.fill();
	}

	function update(dt){
		// spawn
		spawnTimer += dt;
		if(spawnTimer > spawnInterval){ spawnTimer = 0; spawnTarget(); }

		// update targets
		for(let i=targets.length-1;i>=0;i--){
			const t = targets[i];
			t.x += t.vx * dt/1000;
			t.y += t.vy * dt/1000;
			// remove if outside long enough
			if(t.x < -200 || t.x > w+200 || t.y < -200 || t.y > h+200){
				targets.splice(i,1);
				lives -= 1;
				updateHUD();
				if(lives<=0){ endGame(); }
			}
		}

		// update particles
		for(let i=particles.length-1;i>=0;i--){
			const p = particles[i];
			p.x += p.vx * dt/1000;
			p.y += p.vy * dt/1000;
			p.life -= dt;
			if(p.life <=0) particles.splice(i,1);
		}
	}

	function render(){
		ctx.clearRect(0,0,w,h);
		// background subtle grid
		ctx.fillStyle = 'rgba(255,255,255,0.02)';
		for(let gx=0; gx<w; gx+=40){ ctx.fillRect(gx,0,1,h); }
		for(let gy=0; gy<h; gy+=40){ ctx.fillRect(0,gy,w,1); }

		// targets
		for(const t of targets) drawTarget(t);
		// particles
		for(const p of particles){
			ctx.beginPath(); ctx.fillStyle = `rgba(255,255,255,${p.life/p.maxLife})`; ctx.arc(p.x,p.y, p.r,0,Math.PI*2); ctx.fill(); }

	}

	function loop(ts){
		if(!running) return;
		if(paused){ lastTime = ts; requestAnimationFrame(loop); return; }
		const dt = ts - lastTime; lastTime = ts;
		update(dt);
		render();
		requestAnimationFrame(loop);
	}

	function startGame(){
		// reset
		targets = []; particles = []; score = 0; lives = 3; level = 1; spawnInterval = 1200; spawnTimer = 0;
		updateHUD();
		centerUI.style.display='none';
		running = true; paused = false;
		lastTime = performance.now();
		requestAnimationFrame(loop);
	}

	function endGame(){
		running = false;
		centerUI.style.display='block';
		centerUI.innerHTML = `<div class="title">Juego terminado</div><div class="subtitle">Puntuación: ${score}</div><button onclick="(function(){ document.getElementById('centerUI').innerHTML=\"<div class=\\\"title\\\">Pulsa Comenzar</div>\"; })()">Cerrar</button>`;
	}

	function updateHUD(){ scoreBox.textContent = 'Puntuación: '+score; livesBox.textContent = 'Vidas: '+lives; levelBox.textContent = 'Nivel: '+level; }

	// clicking
	canvas.addEventListener('click', (e)=>{
		if(!running || paused) return;
		const rect = canvas.getBoundingClientRect();
		const mx = e.clientX - rect.left; const my = e.clientY - rect.top;
		// check targets from top
		for(let i=targets.length-1;i>=0;i--){
			const t = targets[i];
			const dx = mx - t.x, dy = my - t.y;
			if(Math.sqrt(dx*dx+dy*dy) <= t.size){
				// hit
				score += Math.floor(t.size);
				// create particles
				for(let p=0;p<12;p++){
					particles.push({x: t.x, y: t.y, vx: rand(-200,200), vy: rand(-200,200), r: rand(2,6), life: 600 + rand(0,300), maxLife: 600});
				}
				targets.splice(i,1);
				updateHUD();
				// increase difficulty slightly
				if(score % 200 === 0) { level++; spawnInterval = Math.max(350, spawnInterval - 120); updateHUD(); }
				return; // one hit per click
			}
		}
		// miss: small penalty
		lives -= 0.25; if(lives < 0) lives = 0; updateHUD(); if(lives<=0) endGame();
	});

	// crosshair follow
	window.addEventListener('mousemove',(e)=>{
		const rect = canvas.getBoundingClientRect();
		const cx = e.clientX - rect.left - 20; const cy = e.clientY - rect.top - 20;
		cross.style.left = (rect.left + cx + 12) + 'px';
		cross.style.top = (rect.top + cy + 12) + 'px';
	});

	startBtn.addEventListener('click', ()=>{
		startGame();
	});
	pauseBtn.addEventListener('click', ()=>{
		paused = !paused; pauseBtn.textContent = paused ? 'Reanudar' : 'Pausa';
	});

	// initial message
	centerUI.innerHTML = `<div class="title">Pulsa <strong>Comenzar</strong> para jugar</div><div class="subtitle">Haz clic con el ratón para disparar a los objetivos en movimiento</div>`;
	updateHUD();
})();
</script>
</body>
</html>

